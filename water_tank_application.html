<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Water Tank Problem</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            max-width: 1200px;
            width: 100%;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        h1 {
            color: #333;
            margin-bottom: 10px;
            text-align: center;
        }

        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 14px;
        }

        .input-section {
            margin-bottom: 30px;
        }

        label {
            display: block;
            margin-bottom: 10px;
            color: #555;
            font-weight: 600;
        }

        .input-group {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        input[type="text"] {
            flex: 1;
            padding: 12px 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        input[type="text"]:focus {
            outline: none;
            border-color: #667eea;
        }

        button {
            padding: 12px 30px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        button:active {
            transform: translateY(0);
        }

        .examples {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .example-btn {
            padding: 8px 16px;
            background: #f0f0f0;
            color: #555;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .example-btn:hover {
            background: #e0e0e0;
            border-color: #667eea;
        }

        .result-section {
            margin-bottom: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            display: none;
        }

        .result-section.show {
            display: block;
        }

        .result-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .info-card {
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .info-label {
            font-size: 12px;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 5px;
        }

        .info-value {
            font-size: 24px;
            font-weight: bold;
            color: #667eea;
        }

        .visualization {
            background: white;
            border-radius: 10px;
            padding: 20px;
            overflow-x: auto;
        }

        #tankSVG {
            width: 100%;
            height: auto;
            min-height: 400px;
        }

        .error {
            background: #fee;
            color: #c33;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            border-left: 4px solid #c33;
        }

        .algorithm-info {
            margin-top: 20px;
            padding: 15px;
            background: #e3f2fd;
            border-radius: 8px;
            font-size: 14px;
            line-height: 1.6;
        }

        .algorithm-info h3 {
            color: #1976d2;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üíß Water Tank Problem</h1>
        <p class="subtitle">Calculate water trapped between blocks</p>

        <div class="input-section">
            <label>Enter Block Heights (comma-separated):</label>
            <div class="input-group">
                <input type="text" id="heightInput" placeholder="e.g., 0,4,0,0,0,6,0,6,4,0" value="0,4,0,0,0,6,0,6,4,0">
                <button onclick="calculateWater()">Calculate</button>
            </div>
            
            <label>Try Examples:</label>
            <div class="examples">
                <button class="example-btn" onclick="setExample('0,4,0,0,0,6,0,6,4,0')">Example 1</button>
                <button class="example-btn" onclick="setExample('3,0,2,0,4')">Example 2</button>
                <button class="example-btn" onclick="setExample('0,1,0,2,1,0,1,3,2,1,2,1')">Example 3</button>
                <button class="example-btn" onclick="setExample('4,2,0,3,2,5')">Example 4</button>
            </div>
        </div>

        <div id="resultSection" class="result-section">
            <div class="result-info">
                <div class="info-card">
                    <div class="info-label">Total Water</div>
                    <div class="info-value" id="waterUnits">0 units</div>
                </div>
                <div class="info-card">
                    <div class="info-label">Total Blocks</div>
                    <div class="info-value" id="blockCount">0</div>
                </div>
                <div class="info-card">
                    <div class="info-label">Max Height</div>
                    <div class="info-value" id="maxHeight">0</div>
                </div>
            </div>

            <div class="visualization">
                <svg id="tankSVG"></svg>
            </div>

            <div class="algorithm-info">
                <h3>Algorithm Explanation</h3>
                <p><strong>Approach:</strong> For each position, water level is determined by the minimum of the maximum heights on its left and right, minus the current block height.</p>
                <p><strong>Formula:</strong> water[i] = min(leftMax[i], rightMax[i]) - height[i]</p>
                <p><strong>Time Complexity:</strong> O(n) | <strong>Space Complexity:</strong> O(n)</p>
            </div>
        </div>

        <div id="errorSection"></div>
    </div>

    <script>
        function calculateWaterTrapped(heights) {
            const n = heights.length;
            if (n === 0) return 0;

            const leftMax = new Array(n);
            const rightMax = new Array(n);
            const waterLevels = new Array(n).fill(0);

            // Calculate max height on the left for each position
            leftMax[0] = heights[0];
            for (let i = 1; i < n; i++) {
                leftMax[i] = Math.max(leftMax[i - 1], heights[i]);
            }

            // Calculate max height on the right for each position
            rightMax[n - 1] = heights[n - 1];
            for (let i = n - 2; i >= 0; i--) {
                rightMax[i] = Math.max(rightMax[i + 1], heights[i]);
            }

            // Calculate water at each position
            let totalWater = 0;
            for (let i = 0; i < n; i++) {
                const waterLevel = Math.min(leftMax[i], rightMax[i]) - heights[i];
                waterLevels[i] = Math.max(0, waterLevel);
                totalWater += waterLevels[i];
            }

            return { totalWater, waterLevels, leftMax, rightMax };
        }

        function drawVisualization(heights, waterLevels) {
            const svg = document.getElementById('tankSVG');
            const maxHeight = Math.max(...heights, 1);
            const blockWidth = 50;
            const blockScale = 30;
            const width = heights.length * blockWidth + 40;
            const height = maxHeight * blockScale + 100;

            svg.setAttribute('viewBox', `0 0 ${width} ${height}`);
            svg.innerHTML = '';

            // Draw grid lines
            for (let i = 0; i <= maxHeight; i++) {
                const y = height - 60 - (i * blockScale);
                const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
                line.setAttribute('x1', 10);
                line.setAttribute('y1', y);
                line.setAttribute('x2', width - 10);
                line.setAttribute('y2', y);
                line.setAttribute('stroke', '#e0e0e0');
                line.setAttribute('stroke-width', '1');
                line.setAttribute('stroke-dasharray', '5,5');
                svg.appendChild(line);

                // Height labels
                const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
                text.setAttribute('x', 5);
                text.setAttribute('y', y + 5);
                text.setAttribute('font-size', '12');
                text.setAttribute('fill', '#999');
                text.textContent = i;
                svg.appendChild(text);
            }

            // Draw blocks and water
            for (let i = 0; i < heights.length; i++) {
                const x = 20 + (i * blockWidth);
                const blockHeight = heights[i] * blockScale;
                const waterHeight = waterLevels[i] * blockScale;
                const y = height - 60;

                // Draw water
                if (waterHeight > 0) {
                    const water = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
                    water.setAttribute('x', x);
                    water.setAttribute('y', y - blockHeight - waterHeight);
                    water.setAttribute('width', blockWidth - 2);
                    water.setAttribute('height', waterHeight);
                    water.setAttribute('fill', '#4FC3F7');
                    water.setAttribute('opacity', '0.7');
                    svg.appendChild(water);

                    // Water amount label
                    if (waterLevels[i] > 0) {
                        const waterText = document.createElementNS('http://www.w3.org/2000/svg', 'text');
                        waterText.setAttribute('x', x + blockWidth / 2);
                        waterText.setAttribute('y', y - blockHeight - waterHeight / 2);
                        waterText.setAttribute('text-anchor', 'middle');
                        waterText.setAttribute('font-size', '12');
                        waterText.setAttribute('font-weight', 'bold');
                        waterText.setAttribute('fill', '#0277BD');
                        waterText.textContent = waterLevels[i];
                        svg.appendChild(waterText);
                    }
                }

                // Draw block
                if (blockHeight > 0) {
                    const block = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
                    block.setAttribute('x', x);
                    block.setAttribute('y', y - blockHeight);
                    block.setAttribute('width', blockWidth - 2);
                    block.setAttribute('height', blockHeight);
                    block.setAttribute('fill', '#455A64');
                    block.setAttribute('stroke', '#263238');
                    block.setAttribute('stroke-width', '2');
                    svg.appendChild(block);
                }

                // Height label on block
                const label = document.createElementNS('http://www.w3.org/2000/svg', 'text');
                label.setAttribute('x', x + blockWidth / 2);
                label.setAttribute('y', y + 20);
                label.setAttribute('text-anchor', 'middle');
                label.setAttribute('font-size', '14');
                label.setAttribute('font-weight', 'bold');
                label.setAttribute('fill', '#333');
                label.textContent = heights[i];
                svg.appendChild(label);

                // Index label
                const indexLabel = document.createElementNS('http://www.w3.org/2000/svg', 'text');
                indexLabel.setAttribute('x', x + blockWidth / 2);
                indexLabel.setAttribute('y', y + 40);
                indexLabel.setAttribute('text-anchor', 'middle');
                indexLabel.setAttribute('font-size', '11');
                indexLabel.setAttribute('fill', '#666');
                indexLabel.textContent = `[${i}]`;
                svg.appendChild(indexLabel);
            }

            // Draw ground line
            const groundLine = document.createElementNS('http://www.w3.org/2000/svg', 'line');
            groundLine.setAttribute('x1', 10);
            groundLine.setAttribute('y1', height - 60);
            groundLine.setAttribute('x2', width - 10);
            groundLine.setAttribute('y2', height - 60);
            groundLine.setAttribute('stroke', '#333');
            groundLine.setAttribute('stroke-width', '3');
            svg.appendChild(groundLine);
        }

        function calculateWater() {
            const input = document.getElementById('heightInput').value;
            const errorSection = document.getElementById('errorSection');
            errorSection.innerHTML = '';

            try {
                // Parse input
                const heights = input.split(',').map(val => {
                    const num = parseInt(val.trim());
                    if (isNaN(num) || num < 0) {
                        throw new Error('All values must be non-negative integers');
                    }
                    return num;
                });

                if (heights.length === 0) {
                    throw new Error('Please enter at least one height value');
                }

                // Calculate water
                const { totalWater, waterLevels } = calculateWaterTrapped(heights);
                const maxHeight = Math.max(...heights, 0);

                // Update results
                document.getElementById('waterUnits').textContent = `${totalWater} units`;
                document.getElementById('blockCount').textContent = heights.length;
                document.getElementById('maxHeight').textContent = maxHeight;

                // Draw visualization
                drawVisualization(heights, waterLevels);

                // Show results
                document.getElementById('resultSection').classList.add('show');

            } catch (error) {
                errorSection.innerHTML = `<div class="error">‚ùå Error: ${error.message}</div>`;
                document.getElementById('resultSection').classList.remove('show');
            }
        }

        function setExample(values) {
            document.getElementById('heightInput').value = values;
            calculateWater();
        }

        // Calculate on page load
        window.onload = function() {
            calculateWater();
        };
    </script>
</body>
</html>